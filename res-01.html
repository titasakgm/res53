#!/usr/bin/ruby

require 'cgi'
require 'res_util.rb'

c = CGI::new
user = c['user']
pass = c['pass']

if (user.nil?)
  msg = nil
else
  authen = authenUser(user, pass)
  if (authen == 'PASS')
    print "Location:res-02.rb\n\n"
  else
    msg = "Login failed!"
  end
end

print <<EOF
<html>
<head>
<title>รายงานทรัพยากรสาธารณสุข</title>
<style>
#page {
  width:100%;
}
#res_title {
  position:relative;
  float:left;
  width:100%;
  text-align:center;
}
#res_member {
  position:relative;
  float:left;
  width:180px;
  background-color:yellow;
  text-align:center;
}
#res_member td,th {
  font-size:10px;
  font-weight:normal;
}
#res_option {
  position:relative;
  margin:0;
  border:0;
  padding:0;
  float:right;
  width:75%;
  background-color:lightblue;
}
.inp60 {
  width:60px;
}
</style>
</head>
<body>
<div id='page'>
<div id='res_title'><img src='res-title.png' /></div>
<div id='res_member'>
<form action='res-02.rb' method='GET'>
<table width='100%' border='1'>
<tr>
  <th colspan='2'><img src='res-member.png' /></th>
</tr>
<tr>
  <th align='right'>Username:</th>
  <td><input  class='inp60' type='text' name='user'></td>
</tr>
<tr>
  <th align='right'>Password:</th>
  <td><input class='inp60' type='password' name='pass'></td>
</tr>
<tr>
  <th>&nbsp;</th>
  <td><input type='submit' value='Login'></td>
</tr>
</table>
#{msg}
</form>
</div>
<div id='res_option'>
<h4>โปรดเลือกรายงานที่ต้องการ</h4>
<ul>
<li>ปีที่ต้องการ
<select name='res-year'>
  <option id='ALL'>ทุกปี</option>
  <option id='50'>พ.ศ. 2550</option>
  <option id='49'>พ.ศ. 2549</option>
  <option id='48'>พ.ศ. 2548</option>
  <option id='47'>พ.ศ. 2547</option>
  <option id='46'>พ.ศ. 2546</option>
  <option id='45'>พ.ศ. 2545</option>
</select>
</li>
<li>ประเภทรายงานที่ต้องการ
<select name='res-type'>
  <option id='00'></option>
  <option id='01'>บุคลากรทางการแพทย์และสาธารณสุข</option>
  <option id='02'>แพทย์ที่ศึกษาต่อเฉพาะทางจำแนกตามวุฒิบัตร</option>
  <option id='03'>ครุภัณฑ์การแพทย์ที่มีราคาแพง</option>
  <option id='04'>การให้บริการของสถานพยาบาล</option>
</select>
</li>
<li>จังหวัดที่ต้องการ
<select name='res-prov'>
<option id='99'>ทุกจังหวัด</option><option id='11'>สมุทรปราการ</option> <option id='12'>นนทบุรี</option> <option id='13'>ปทุมธานี</option> <option id='14'>พระนครศรีอยุธยา</option> <option id='15'>อ่างทอง</option> <option id='16'>ลพบุรี</option> <option id='17'>สิงห์บุรี</option> <option id='18'>ชัยนาท</option> <option id='19'>สระบุรี</option> <option id='20'>ชลบุรี</option> <option id='21'>ระยอง</option> <option id='22'>จันทบุรี</option> <option id='23'>ตราด</option> <option id='24'>ฉะเชิงเทรา</option> <option id='25'>ปราจีนบุรี</option> <option id='26'>นครนายก</option> <option id='27'>สระแก้ว</option> <option id='30'>นครราชสีมา</option> <option id='31'>บุรีรัมย์</option> <option id='32'>สุรินทร์</option> <option id='33'>ศรีสะเกษ</option> <option id='34'>อุบลราชธานี</option> <option id='35'>ยโสธร</option> <option id='36'>ชัยภูมิ</option> <option id='37'>อำนาจเจริญ</option> <option id='39'>หนองบัวลำภู</option> <option id='40'>ขอนแก่น</option> <option id='41'>อุดรธานี</option> <option id='42'>เลย</option> <option id='43'>หนองคาย</option> <option id='44'>มหาสารคาม</option> <option id='45'>ร้อยเอ็ด</option> <option id='46'>กาฬสินธุ์</option> <option id='47'>สกลนคร</option> <option id='48'>นครพนม</option> <option id='49'>มุกดาหาร</option> <option id='50'>เชียงใหม่</option> <option id='51'>ลำพูน</option> <option id='52'>ลำปาง</option> <option id='53'>อุตรดิตถ์</option> <option id='54'>แพร่</option> <option id='55'>น่าน</option> <option id='56'>พะเยา</option> <option id='57'>เชียงราย</option> <option id='58'>แม่ฮ่องสอน</option> <option id='60'>นครสวรรค์</option> <option id='61'>อุทัยธานี</option> <option id='62'>กำแพงเพชร</option> <option id='63'>ตาก</option> <option id='64'>สุโขทัย</option> <option id='65'>พิษณุโลก</option> <option id='66'>พิจิตร</option> <option id='67'>เพชรบูรณ์</option> <option id='70'>ราชบุรี</option> <option id='71'>กาญจนบุรี</option> <option id='72'>สุพรรณบุรี</option> <option id='73'>นครปฐม</option> <option id='74'>สมุทรสาคร</option> <option id='75'>สมุทรสงคราม</option> <option id='76'>เพชรบุรี</option> <option id='77'>ประจวบคีรีขันธ์</option> <option id='80'>นครศรีธรรมราช</option> <option id='81'>กระบี่</option> <option id='82'>พังงา</option> <option id='83'>ภูเก็ต</option> <option id='84'>สุราษฎร์ธานี</option> <option id='85'>ระนอง</option> <option id='86'>ชุมพร</option> <option id='90'>สงขลา</option> <option id='91'>สตูล</option> <option id='92'>ตรัง</option> <option id='93'>พัทลุง</option> <option id='94'>ปัตตานี</option> <option id='95'>ยะลา</option> <option id='96'>นราธิวาส</option> <option id='10'>กทม.</option> <option id='98'>ส่วนกลางไม่รวมจังหวัด</option>
</select>
</li>
<li><input type='submit' value='แสดงรายงาน' /></li>
</ul>
</div>
</div>
</body>
</html>
EOF
